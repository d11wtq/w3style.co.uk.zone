{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Route53 zone for w3style.co.uk",

  "Parameters": {
    "name": {
      "Description": "The domain name of the hosted zone",
      "Type": "String",
      "Default": "w3style.co.uk"
    }
  },

  "Resources": {
    "zone": {
      "Type": "AWS::Route53::HostedZone",
      "Properties": {
        "Name": {"Ref": "name"}
      }
    },

    "mxRecords": {
      "Type": "AWS::Route53::RecordSet",
      "Properties": {
        "HostedZoneId": {"Ref": "zone"},
        "Name": {"Fn::Join": ["", [{"Ref": "name"}, "."]]},
        "TTL": "600",
        "Type": "MX",
        "ResourceRecords": [
          "10 ASPMX.L.GOOGLE.COM.",
          "20 ALT1.ASPMX.L.GOOGLE.COM.",
          "20 ALT2.ASPMX.L.GOOGLE.COM.",
          "30 ASPMX2.GOOGLEMAIL.COM.",
          "30 ASPMX3.GOOGLEMAIL.COM.",
          "30 ASPMX4.GOOGLEMAIL.COM.",
          "30 ASPMX5.GOOGLEMAIL.COM."
        ]
      }
    },

    "spfRecord": {
      "Type": "AWS::Route53::RecordSet",
      "Properties": {
        "HostedZoneId": {"Ref": "zone"},
        "Name": {"Fn::Join": ["", [{"Ref": "name"}, "."]]},
        "TTL": "600",
        "Type": "TXT",
        "ResourceRecords": [
          "\"v=spf1 a mx mx:googlemail.com ~all\""
        ]
      }
    }
  }
}
